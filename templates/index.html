<!DOCTYPE html>
<html>
<head>
    <title>NPC Gachapon</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="static/styles.css">
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lilita+One&display=swap" rel="stylesheet">
    <!-- FontAwesome icon library -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <!-- Bootstrap JS, Popper.js, and jQuery -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
</head>    
<body>
    <div class="container my-4">
        <!-- <h1 class="display-4 text-center mb-4 font-weight-bold">NPC Gachapon</h1> -->
        <div class="header-container">
            <h1 class="display-4 text-center mb-4 font-weight-bold lilita-one-regular">NPC GACHAPON</h1>
            <i class="fas fa-question-circle" id="help"></i>
        </div>
        <div class="help-panel" id="help-panel">
            <i class="fas fa-times close-icon" id="button-close"></i>
            <h2>Welcome to NPC Gachapon!</h2>
            <br>

            <p>NPC Gachapon can be used to quickly generate non-player characters for tabletop RPG games like Dungeons & Dragons and Pathfinder.</p>
            <br>

            <h3>How to Use</h3>
            <p>Simply click the “Generate Character” button and NPC Gachapon will generate initials for the First and Last Names, a Race, a Class, and an Alignment.</p>
            <p>This is useful for providing you with a starting point for the character you are building. You can fill in the character's full names in the relevant text boxes, and feel free to adjust any of the other generated attributes as necessary.</p>
            <p>If you would like NPC Gachapon to generate full First and Last Names instead of initials, you must enable the "Generate Full Names" checkbox under GPT Settings. These names will be influenced by the Gender and Genre selected from the dropdown menus.</p>
            <p>If you want to re-roll a single attribute e.g. Class, simply click on the name of that attribute.</p>
            <br>

            <h3>Generating Portrait Images</h3>
            <p>Once you are happy with your character’s attributes, you may click the gachapon capsule to generate a portrait image. Portrait images will also be influenced by the Gender and Genre dropdown menus under GPT Settings.</p>
            <p>Once the image has been generated, you can click on it to open it in a new browser tab.
            You can also hover over the portrait image and click on the refresh icon to generate a new portrait image. (The previous image will be lost).</p>
            <br>

            <h3>More Info</h3>
            <p>NPC Gachapon was created by Gregory White: <a href="https://www.gregory-white.co.uk" target="_blank" rel="noopener noreferrer">Visit my Website</a> | <a href="https://github.com/gregwht" target="_blank" rel="noopener noreferrer"></i>Visit my GitHub</a></p>
            <p>It started life as my final project for the <a href="https://pll.harvard.edu/course/cs50-introduction-computer-science" target="_blank" rel="noopener noreferrer">CS50 Introduction to Computer Science</a> course. The full course is available online, totally for free, and is incredible. Thank you to David J. Malan and the CS50 team for your effort and generosity. If you are interested in learning to code, I can recommend no better than the CS50 course.</p>
        </div>
        <!-- CHARACTER SHEET -->
        <div id="character-sheet" class="card mb-5">
            <!-- <h5>Character Sheet</h5> -->
            <div class="card-body">
                <!-- Character Attributes -->
                <div class="row">
                    <div class="col-7 mt-3">
                        <!-- Names -->
                        <div class="row">
                            <div class="col-6">
                                <label for="input-first-name" class="font-weight-bold clickable-text w-100" onclick="rerollAttribute('first-initial')">
                                    First Name:
                                </label>
                            </div>
                            <div class="col-6">
                                <label for="input-last-name" class="font-weight-bold clickable-text w-100"  onclick="rerollAttribute('last-initial')">
                                    Last Name:
                                </label>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-6">
                                <input type="text" id="input-first-name" class="form-control form-control-lg">
                            </div>
                            <div class="col-6">
                                <input type="text" id="input-last-name" class="form-control form-control-lg">
                            </div>
                        </div>
                        <!-- Race & Class -->
                        <div class="row">
                            <div class="col-6">
                                <label for="input-race" class="font-weight-bold clickable-text w-100" onclick="rerollAttribute('race')">
                                    Race:
                                </label>
                            </div>
                            <div class="col-6">
                                <label for="input-class" class="font-weight-bold clickable-text w-100" onclick="rerollAttribute('class')">
                                    Class:
                                </label>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-6">
                                <input type="text" id="input-race" class="form-control form-control-lg">
                            </div>
                            <div class="col-6">
                                <input type="text" id="input-class" class="form-control form-control-lg">
                            </div>
                        </div>
                        <!-- Alignment -->
                        <div class="row">
                            <div class="col-12">
                                <label for="input-alignment" class="font-weight-bold clickable-text w-100" onclick="rerollAttribute('alignment')">
                                    Alignment:
                                </label>
                            </div>
                        </div>
                        <div class="row mb-4">
                            <div class="col-12">
                                <input type="text" id="input-alignment" class="form-control form-control-lg">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12 mt-3 ">
                                <!-- GENERATE CHARACTER BUTTON -->
                                <div id="generate-button">
                                <!-- <div id="generate-button" class="text-center mt-3 mb-5"> -->
                                    <button type="submit"
                                        name="generate-attributes"
                                        id="button-generate-character" 
                                        value="generate-character" 
                                        class="btn-main w-100">
                                        <!-- btn btn-primary btn-sm my-3 mx-3 -->
                                        Generate Character
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Character Portrait -->
                    <div class="col-5 mt-3">
                        <div class="card-body">
                            <div class="image-container" id="image-container">
                                <img id="img-capsule" src="static/img/capsule-yellow.png" alt="Illustration of a gachapon capsule">
                                <img id="img-gpt" src="static/img/placeholder.jpg" alt="Character Portrait" style="display:none;">
                                <div class="overlay-text" id="overlay-text">Click capsule to generate character portrait</div>
                                <i class="fas fa-sync-alt refresh-icon" id="refresh-icon"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
         <!-- GACHAPON SETTINGS -->
         <!-- <p class="settings-title">Gachapon Machine Settings</p> -->
         <div id="gachapon-settings">
            <div class="card mt-3 mb-3">
                <!-- GPT Settings -->
                <div id="gpt-settings" class="mt-3 mb-3 mx-3">
                    <div class="row">
                        <h5 class="col-8">GPT Settings</h5>
                    </div>
                    <div class="row">
                        <p class="col-auto settings-desc">Configure ChatGPT settings:</p>
                    </div>
                    <div class="row">
                        <div class="col-auto">
                            <label for="input-API-key"> OpenAI API Key:</label>
                            <input type="text" id="input-API-key">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-auto">
                            <label for="checkbox-gpt-name" class="custom-checkbox">
                                Generate Full Names
                                <input type="checkbox" id="checkbox-gpt-name" name="checkbox-gpt-name" unchecked hidden>
                                <span class="checkmark"></span>
                            </label>
                        
                            <label for="dropdown-gender">Select Character Gender:</label>
                            <select id="dropdown-gender" name="dropdown-gender" class="dropdown">
                                {% for gender in genders %}
                                    <option value="{{ gender }}">{{ gender }}</option>
                                {% endfor %}
                            </select>
                
                            <label for="dropdown-genre">Select Game Genre:</label>
                            <select id="dropdown-genre" name="dropdown-genre">
                                {% for genre in genres %}
                                    <option value="{{ genre }}">{{ genre }}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                </div>
                <!-- General Attribute Settings -->
                <div id="general-attribute-settings" class="mb-3 mx-3">
                    <div class="row">
                        <h5 class="col-8">General Attribute Settings</h5>
                        <div class="col-4 text-right">
                            <button name="button-reset-attributes" 
                                    id="button-reset-attributes" 
                                    class="btn btn-outline-primary btn-outline-primary-custom btn-sm">
                                    Deselect All
                            </button>
                        </div>
                    </div>
                    <div class="row">
                        <p class="col-auto settings-desc">Roll the selected attributes:</p>
                    </div>
                    <div class="row">
                        <div class="col-auto">
                            <label for="checkbox-first-initial" class="custom-checkbox">
                                First Initial
                                <input type="checkbox" id="checkbox-first-initial" name="checkbox-first-initial" checked hidden>
                                <span class="checkmark"></span>
                            </label>

                            <label for="checkbox-last-initial" class="custom-checkbox">
                                Last Initial
                                <input type="checkbox" id="checkbox-last-initial" name="checkbox-last-initial" checked hidden>
                                <span class="checkmark"></span>
                            </label>

                            <label for="checkbox-alignment" class="custom-checkbox">
                                Alignment
                                <input type="checkbox" id="checkbox-alignment" name="checkbox-alignment" checked hidden>
                                <span class="checkmark"></span>
                            </label>

                            <label for="checkbox-race" class="custom-checkbox">
                                Race
                                <input type="checkbox" id="checkbox-race" name="checkbox-race" checked hidden>
                                <span class="checkmark"></span>
                            </label>

                            <label for="checkbox-class" class="custom-checkbox">
                                Class
                                <input type="checkbox" id="checkbox-class" name="checkbox-class" checked hidden>
                                <span class="checkmark"></span>
                            </label>
                        </div>
                    </div>
                </div>
                <!-- Race Settings -->
                <div id="race-settings" class="mb-3 mx-3">
                    <div class="row">
                        <h5 class="col-8">Race Settings</h5>
                        <div class="col-4 text-right">
                            <button name="button-reset-races" 
                                    id="button-reset-races" 
                                    class="btn btn-outline-primary btn-outline-primary-custom btn-sm">
                                    Deselect All
                            </button>
                        </div>
                    </div>
                    <div class="row">
                        <p class="col-auto settings-desc">Roll from the selected races:</p>
                    </div>
                    <div class="row">
                        <div class="col-auto">
                            {% for race in races %}
                                <label for="checkbox-race-{{ race }}" class="custom-checkbox">
                                    {{ race }}
                                    <input type="checkbox" id="checkbox-race-{{ race }}" name="checkbox-race-{{ race }}" checked hidden>
                                    <span class="checkmark"></span>
                                </label>
                            {% endfor %}
                        </div>
                    </div>
                </div>
                <!-- Class Settings -->
                <div id="race-settings" class="mb-3 mx-3">
                    <div class="row">
                        <h5 class="col-8">Class Settings</h5>
                        <div class="col-4 text-right">
                            <button name="button-reset-classes" 
                                    id="button-reset-classes" 
                                    class="btn btn-outline-primary btn-outline-primary-custom btn-sm">
                                    Deselect All
                            </button>
                        </div>
                    </div>
                    <div class="row">
                        <p class="col-auto settings-desc">Roll from the selected classes:</p>
                    </div>
                    <div class="row">
                        <div class="col-auto">
                            {% for class_ in classes %}
                                <label for="checkbox-class-{{ class_ }}" class="custom-checkbox">
                                    {{ class_ }}
                                    <input type="checkbox" id="checkbox-class-{{ class_ }}" name="checkbox-class-{{ class_ }}" checked hidden>
                                    <span class="checkmark"></span>
                                </label>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>
         </div>
    </div>

    <script src="static/js/script.js"></script>  
</body>